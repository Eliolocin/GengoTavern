
As you complete tasks and reference relevant files, update this file as our memory to help with future tasks and to keep track of our progress.

| ID                                         | Dependencies | Category             | Description                                                             | User Story                                                                                                | Expected Behavior / Outcome                                                                                                                         | Priority | Status            | Acceptance Criteria                                                     |
| ------------------------------------------ | ------------ | -------------------- | ----------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | ----------------- | ----------------------------------------------------------------------- |
| **1 — Existing Core (Completed)**          |              |                      |                                                                         |                                                                                                           |                                                                                                                                                     |          |                   |                                                                         |
| 1.1                                        |              | Onboarding           | First-run welcome modal                                                 | As a first-time user, I want a concise welcome message so I know what GengoTavern does and where to click | Modal appears once on first launch; user can hide/redisplay via Help tab                                                                            | Baseline | ✅ Completed       | Modal shows only on first run; Help tab can reopen it                   |
| 1.2                                        |              | Character Management | Import character PNG                                                    | As a user, I want to import a character PNG so I can quickly load existing personas                       | PNG’s embedded JSON unpacks to character slot; supports personal or backup export types                                                             | High     | ✅ Completed       | Imported character data identical to original; images load correctly    |
| 1.3                                        |              | Character Management | Create new empty character                                              | As a user, I want to add a blank character slot to start fresh                                            | “➕” button adds puts user into New-character flow wherein modal pops-up with three choices: "Empty Character", "Character From Image", "Group Chat" | High     | Needs refactoring | New character appears, ready for editing                                |
| 1.4                                        |              | Character Management | Switch active character                                                 | As a user, I want to click any character icon to swap instantly                                           | Chat pane reloads history for selected character                                                                                                    | High     | ✅ Completed       | Character switch is < 100 ms, correct chat loads                        |
| 1.5                                        |              | Chat Management      | Create new chat                                                         | As a user, I want multiple chats per character                                                            | “New Chat” in dropdown adds fresh chat session                                                                                                      | High     | ✅ Completed       | New chat listed, scenario auto-inserted                                 |
| 1.6                                        |              | Chat Management      | Edit chat metadata                                                      | As a user, I want to rename or tweak a chat                                                               | Edit option opens modal for name / scenario                                                                                                         | Medium   | ✅ Completed       | Changes persist on save                                                 |
| 1.7                                        |              | Chat Management      | Export chat                                                             | As a user, I need to back up or share chat logs                                                           | Exports to JSON/plain-text                                                                                                                          | Medium   | ✅ Completed       | File downloads and re-imports without loss                              |
| 1.8                                        |              | Chat Management      | Delete chat                                                             | As a user, I want to remove obsolete chats                                                                | Delete prompts confirmation then removes record                                                                                                     | Medium   | ✅ Completed       | Chat gone from sidebar; storage updated                                 |
| 1.9                                        |              | Chat Management      | Select chat                                                             | As a user, I want to jump between chats easily                                                            | Dropdown expands; selecting loads convo                                                                                                             | High     | ✅ Completed       | Correct messages render; scroll position remembered                     |
| 1.10                                       |              | Messaging            | Send & view messages                                                    | As a user, I want a responsive chat pane to converse                                                      | Messages post instantly; AI replies populate                                                                                                        | High     | ✅ Completed       | ≤ 200 ms local echo; AI reply shows with spinner                        |
| 1.11                                       |              | Messaging            | Edit messages (user & AI)                                               | As a user, I want to fix typos or tweak RP                                                                | Clicking message opens editor; on save, history updates                                                                                             | High     | ✅ Completed       | Edited content persists and is regenerated if AI side                   |
| 1.12                                       |              | Messaging            | Delete messages                                                         | As a user, I want to remove unwanted lines                                                                | Trash icon removes message and adjusts context                                                                                                      | Medium   | ✅ Completed       | Message disappears and prompt cache updates                             |
| 1.13                                       |              | Messaging            | Reroll latest AI reply                                                  | As a user, I want a quick retry when the bot’s response is off                                            | Reroll button resends last user msg with same params                                                                                                | Medium   | ✅ Completed       | New reply replaces old; temp / top-p preserved                          |
| 1.14                                       |              | Settings             | Edit user persona (name, description)                                   | As a user, I want the AI to recognize my custom persona                                                   | Settings tab updates persona JSON and refreshes prompt                                                                                              | High     | ✅ Completed       | New persona used in next AI turn                                        |
| 1.15                                       |              | Settings             | “Nuke my data” button                                                   | As a user, I want a one-click hard reset                                                                  | Big red button clears contents of files and folders in root directory                                                                               | Medium   | ✅ Completed       | All data wiped; app reloads in onboarding state                         |
| 1.16                                       |              | API                  | Enter API key                                                           | As a user, I must set my Gemini (or other) API key                                                        | Key stored (local) and validated                                                                                                                    | High     | ✅ Completed       | Invalid key shows error; valid key passes                               |
| 1.17                                       |              | API                  | Select LLM model                                                        | As a user, I want to swap between Gemini Pro, Gemini Flash, etc.                                          | Dropdown lists models; selection stored globally                                                                                                    | Medium   | ✅ Completed       | Requests hit chosen model; reflected in UI                              |
| 1.18                                       |              | API                  | Adjust temperature / creativity                                         | As a user, I want control over randomness                                                                 | Slider 1–2 updates param in header                                                                                                                  | Medium   | ✅ Completed       | New temp value used immediately                                         |
| 1.19                                       |              | Help                 | Writing tips panel                                                      | As a learner, I want quick RP advice                                                                      | Tab shows static tips / link outs                                                                                                                   | Low      | ✅ Completed       | Panel renders markdown; links open in new tab                           |
| 1.20                                       |              | Help                 | Reopen welcome modal                                                    | As a user, I want to reread instructions                                                                  | Button in Help tab re-triggers modal                                                                                                                | Low      | ✅ Completed       | Modal identical to first-run                                            |
| 1.21                                       |              | Persistence          | Local data longevity                                                    | As a user, I expect chats and settings to stay after closing                                              | Data saved locally as simple local files and folders in root directory                                                                              | High     | ✅ Completed | Relaunch shows unchanged state                                          |
| 1.22                                       |              | Character Management | View character profile                                                  | As a user, I want to inspect a character’s lore                                                           | Right pane displays description, sample dialogue, defaults                                                                                          | Medium   | ✅ Completed       | All fields accurately displayed                                         |
| 1.23                                       |              | UI/UX                | Collapse side panes                                                     | As a user, I want distraction-free writing                                                                | Toggle arrows hide left / right panes                                                                                                               | Low      | ✅ Completed       | Panes animate closed; reopen restores width                             |
| **2 — Visual Novel Mode**                  |              |                      |                                                                         |                                                                                                           |                                                                                                                                                     |          |                   |                                                                         |
| 2.1                                        |              | UI/UX                | VN mode global toggle                                                   | As a user, I want to switch between chat room and VN presentation quickly                                 | Toggle beside chat box swaps layouts instantly                                                                                                      | High     | Not yet started   | Toggle persists per session; layout change ≤ 150 ms                     |
| 2.2                                        | 2.1          | Rendering            | VN single-message textbox & centered sprite                             | As a user, I want immersive VN style view                                                                 | Only latest line shows; speaker name indicated; sprite centered                                                                                     | High     | Not yet started   | Layout responsive; scrollback accessible via history button             |
| 2.3                                        |              | Asset Management     | Sprite upload per emotion                                               | As a user, I want to attach emotion sprites to characters                                                 | Upload dialog stores images in character folder keyed by emotion                                                                                    | Medium   | Not yet started   | Supported formats (PNG/WebP); 512px guideline; metadata saved           |
| 2.4                                        | 2.3          | Sentiment Engine     | Auto-swap sprite on emotion detection                                   | As a user, I want sprites to match tone                                                                   | SillyTavern-Extras API classifies last AI message, swaps sprite                                                                                     | High     | Not yet started   | ≥ 80 % correct emotion mapping in test set                              |
| 2.5                                        | 2.1          | UX Fallback          | Graceful handling when no sprite                                        | As a user, I don’t want broken images                                                                     | If sprite missing, center area stays blank or shows default silhouette                                                                              | Low      | Not yet started   | No console errors; placeholder shown                                    |
| **3 — Group Chats**                        |              |                      |                                                                         |                                                                                                           |                                                                                                                                                     |          |                   |                                                                         |
| 3.1                                        |              | Character Management | “New Group Chat” wizard                                                 | As a user, I want to bundle existing characters into one chat                                             | New-character flow offers “Group Chat”; lets user pick members                                                                                      | High     | Not yet started   | Wizard adds group card with composite icon                              |
| 3.2                                        | 3.1          | Prompt Assembly      | Merge member profiles into prompt                                       | As a user, I expect all member lore considered in replies                                                 | Backend concatenates descriptions & dialogues with smart {{char}} → name swap                                                                       | High     | Not yet started   | Prompt passes token tests; replies reference correct speaker            |
| 3.3                                        | 3.1          | Group Settings       | Member list & response probability sliders                              | As a user, I want to control who speaks and how often                                                     | Right pane shows table with sliders 0–100 % per member                                                                                              | Medium   | Not yet started   | Probabilities saved; queue logic triggers accordingly                   |
| 3.4                                        | 3.3          | Engine Logic         | Multi-speaker queue                                                     | As a user, I want natural back-and-forth without overlaps                                                 | After each message, 0+ members respond based on probability; ties random; speaker cannot answer own turn                                            | High     | Not yet started   | Simulated 100-msg run shows no self-reply; distribution matches sliders |
| 3.5                                        | 3.1          | Chat Management      | Group chat scenario/greeting split                                      | As a user, I want starting lines per character                                                            | New chat modal has multi-textarea greeting fields                                                                                                   | Medium   | Not yet started   | Greeting at turn 0 shows each character’s opening correctly             |
| 3.6                                        | 2.1,3.1      | VN Rendering         | Multi-sprite display in VN mode                                         | As a user, I want all active characters on screen                                                         | Sprites auto-positioned (e.g., left-center-right) with sentiment swaps                                                                              | Medium   | Not yet started   | Up to 5 sprites rendered without overlap on 1080p                       |
| **4 — Image-to-Text Character Creator**    |              |                      |                                                                         |                                                                                                           |                                                                                                                                                     |          |                   |                                                                         |
| 4.1                                        |              | UI/UX                | “Generate from Image” button & modal                                    | As a user, I want to drop an image and auto-create a character                                            | New-character flow offers “New-Character From Image”; opens modal; image upload + optional prompt                                                   | High     | Not yet started   | PNG/JPEG accepted; preview displayed                                    |
| 4.2                                        | 4.1          | LLM Integration      | Gemini structured-output call                                           | As a user, I want attributes filled automatically                                                         | App sends image + prompt to Gemini; receives structured output JSON with name, description, samples, scenario, greeting                             | High     | Not yet started   | JSON matches schema; failure handled gracefully                         |
| 4.3                                        | 4.2          | Confirmation         | Preview & overwrite protection                                          | As a user, I want to review before accepting new character                                                | Success screen shows parsed fields; “Accept” creates character “Cancel” puts user back to New-character flow                                        | Medium   | Not yet started   | No accidental data loss; undo supported within session                  |
| 4.4                                        | 4.2          | Persistence          | Save generated fields                                                   | As a user, I want new character to persist                                                                | On accept, fields write to character JSON and local storage                                                                                         | High     | Not yet started   | Reload app shows generated character unchanged                          |
| **5 — Implicit Grammar Correction Module** |              |                      |                                                                         |                                                                                                           |                                                                                                                                                     |          |                   |                                                                         |
| 5.1                                        |              | Pipeline             | Tutor LLM pre-processor                                                 | As a learner, I want subtle grammar help without breaking immersion                                       | User msg → Tutor LLM → maybe system correction msg → roleplay LLM                                                                                   | High     | Not yet started   | Latency ≤ 2 s extra; tutor messages distinguishable                     |
| 5.2                                        | 5.1          | UI/UX                | Correction mode toggle (Off / Implicit Feedback / Narrative Suggestion) | As a user, I want to switch correction modes quickly                                                      | Dropdown beside VN toggle sets mode globally                                                                                                        | High     | Not yet started   | Selection stored; state reflected in tutor pipeline                     |
| 5.3                                        | 5.1          | Prompt Engineering   | Recast response template                                                | As a learner, I want natural recasts                                                                      | Tutor transforms error sentence into correct one conversationally                                                                                   | Medium   | Not yet started   | 90 % of test inputs produce valid recasts                               |
| 5.4                                        | 5.1          | Prompt Engineering   | Narrative suggestion template                                           | As a learner, I want creative RP suggestions that also fix grammar                                        | Tutor offers rewritten sentence plus RP hook                                                                                                        | Medium   | Not yet started   | At least one suggestion per detection; keeps character context          |
| 5.5                                        | 5.1          | Performance          | Caching & batching                                                      | As a user, I want minimal slowdown                                                                        | Short messages batch; repeated corrections cached                                                                                                   | Low      | Not yet started   | Avg added latency < 500 ms with cache hit                               |
